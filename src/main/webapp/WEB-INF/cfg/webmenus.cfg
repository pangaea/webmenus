<?xml version="1.0" encoding="UTF-8"?>

<taxonomy version="1.0">

	<!-- BASE -->
	<class name="CEAccount" abstract="sql" table="base_account" security="public">
		<baseclass name="CRole"/>
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<!--property name="name" type="text" column="name" required="true"/-->
			<property name="type" type="text" column="type" required="true"/>
			<property name="accept_license" type="boolean" column="accept_license"/>
			<property name="allow_email" type="boolean" column="allow_email"/>
			<property name="created" type="datetime" column="created"/>
		</properties>
	</class>
	<!--class name="CEMyAccount" abstract="sql" table="base_account" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="type" type="text" column="type"/>
		</properties>
	</class-->

	<class name="EventTest" abstract="none" preDelete="proc.js">
	</class>

	<class name="CELocation" abstract="sql" table="base_location" security="role"><!--preInsert="account_manager.js"-->
		<baseclass name="CAddress"/>
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="created" type="datetime" column="created"/>
			<property name="role" type="text" column="role" required="true"/>
			<property name="name" type="text" column="name" required="true"/>
			<property name="tax" type="real" column="tax_rate"/>
			<property name="timezone" type="text" column="timezone" required="true"/>
			<property name="phone_num" type="text" column="phone_num"><![CDATA[
				^(1\s*[-\/\.]?)?(\((\d{3})\)|(\d{3}))\s*[-\/\.]?\s*(\d{3})\s*[-\/\.]?\s*(\d{4})\s*(([xX]|[eE][xX][tT])\.?\s*(\d+))*$
			]]></property>
			<property name="fax_num" type="text" column="fax_num"><![CDATA[
				^(1\s*[-\/\.]?)?(\((\d{3})\)|(\d{3}))\s*[-\/\.]?\s*(\d{3})\s*[-\/\.]?\s*(\d{4})\s*(([xX]|[eE][xX][tT])\.?\s*(\d+))*$
			]]></property>
			<property name="fax_orders" type="boolean" column="fax_orders"/>
			<property name="email_addr" type="text" column="email_addr" required="true"><![CDATA[
				[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?
			]]></property>
			<property name="email_orders" type="boolean" column="email_orders"/>
			<property name="logo" type="text" column="logo"/>
			<!--property name="template" type="text" column="template"/-->
			<property name="theme" type="object" class="CETheme" column="theme"/>
			<property name="exit_url" type="text" column="exit_url"/>
			<property name="delivery_avail" type="boolean" column="delivery_avail"/>
			<property name="email_orders_pdf" type="boolean" column="email_orders_pdf"/>
		</properties>
	</class>
	
	<class name="CEThemeInfo" abstract="sql" table="base_theme" security="public">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="name" type="text" column="name" readonly="true"/>
			<property name="menuwidth" type="text" column="menuwidth" readonly="true"/>
			<property name="columns" type="int" column="columns" readonly="true"/>
			<property name="font" type="text" column="font" readonly="true"/>
			<property name="font_size" type="text" column="font_size" readonly="true"/>
			<property name="bkcolor" type="text" column="bkcolor" readonly="true"/>
			<property name="option_text_color" type="text" column="option_text_color" readonly="true"/>
			<property name="titlebar_color" type="text" column="titlebar_color"/>
			<property name="cat_text_color" type="text" column="cat_text_color"/>
			<property name="item_text_color" type="text" column="item_text_color"/>
			<property name="itemdesc_text_color" type="text" column="itemdesc_text_color"/>
			<property name="system_text_color" type="text" column="system_text_color"/>
			<property name="template" type="text" column="template" readonly="true"/>
		</properties>
	</class>
	
	<class name="CETheme" abstract="sql" table="base_theme" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="menuwidth" type="text" column="menuwidth"/>
			<property name="columns" type="int" column="columns"/>
			<property name="font" type="text" column="font"/>
			<property name="font_size" type="text" column="font_size"/>
			<property name="bkcolor" type="text" column="bkcolor"/>
			<property name="option_text_color" type="text" column="option_text_color"/>
			<property name="titlebar_color" type="text" column="titlebar_color"/>
			<property name="cat_text_color" type="text" column="cat_text_color"/>
			<property name="item_text_color" type="text" column="item_text_color"/>
			<property name="itemdesc_text_color" type="text" column="itemdesc_text_color"/>
			<property name="system_text_color" type="text" column="system_text_color"/>
			<property name="template" type="text" column="template"/>
		</properties>
	</class>
	
	<class name="CEPatron" abstract="sql" table="base_patron" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="role" type="text" column="role" required="true"/>
			<property name="email" type="text" column="email" required="true"><![CDATA[
				[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?
			]]></property>
			<property name="firstname" type="text" column="firstname" required="true"/>
			<property name="lastname" type="text" column="lastname"/>
			<property name="phone_num" type="text" column="phone_num" required="true"><![CDATA[
				^(1\s*[-\/\.]?)?(\((\d{3})\)|(\d{3}))\s*[-\/\.]?\s*(\d{3})\s*[-\/\.]?\s*(\d{4})\s*(([xX]|[eE][xX][tT])\.?\s*(\d+))*$
			]]></property>
		</properties>
	</class>
	
	<!--  WEBMENUS  -->
	<class name="CCSchedule" abstract="sql" table="webmenus_schedule" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="description" type="text" column="description"/>
			<!--property name="menus" type="list" ref_table="webmenus_schedule_menu_list" owner_ref="yes" table="webmenus_menu" column="name,menu_index,location_id" fkey="fkey" object_ref="objid"/-->
		</properties>
		<references>
			<reference class="CCOpHours" fkey="schedule"/>
		</references>
	</class>
	<class name="CCOpHours" abstract="sql" table="webmenus_ophours" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<!--property name="weekday" type="text" column="weekday"/-->
			<property name="on_sunday" type="boolean" column="on_sunday"/>
			<property name="on_monday" type="boolean" column="on_monday"/>
			<property name="on_tuesday" type="boolean" column="on_tuesday"/>
			<property name="on_wednesday" type="boolean" column="on_wednesday"/>
			<property name="on_thursday" type="boolean" column="on_thursday"/>
			<property name="on_friday" type="boolean" column="on_friday"/>
			<property name="on_saturday" type="boolean" column="on_saturday"/>
			<property name="start_time" type="time" column="start_time"/>
			<property name="hours" type="int" column="hours"/>
			<property name="minutes" type="int" column="minutes"/>
			<!--property name="menus" type="list" ref_table="webmenus_ophours_menus_list" owner_ref="yes" table="webmenus_menu" column="name,menu_index,location_id" fkey="fkey" object_ref="objid"/-->
			<!--property name="menus" type="list" ref_table="webmenus_ophours_menus_list" owner_ref="no" table="webmenus_menu" column="name,title,uri" fkey="fkey" object_ref="objid"/>
			<property name="menus" type="list" ref_table="webmenus_ophours_menus_list" owner_ref="yes" table="webmenus_menu" column="name"/-->
			<!--property name="location" type="object" class="CELocation" column="location_id"/-->
			<property name="schedule" type="object" class="CCSchedule" column="schedule_id"/>
		</properties>
	</class>
	<!--class name="CCOpHoursMenuRef" abstract="sql" table="webmenus_ophours_menus_ref" security="public">
		<properties>
			<property name="ophour" type="object" class="CCOpHours" column="ophourid"/>
			<property name="menu" type="object" class="CCMenu" column="menuid"/>
		</properties>
	</class-->
	<class name="CCMenu" abstract="sql" table="webmenus_menu" security="role"><!-- preUpdate="menus.js"-->
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="role" type="text" column="role" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="hidden" type="boolean" column="hidden"/>
			<property name="show_options" type="boolean" column="show_options"/>
			<property name="menu_index" type="int" column="menu_index"/>
			<property name="take_orders" type="int" column="take_orders"/>
			<property name="location" type="object" class="CELocation" column="location_id"/>
			<property name="schedule" type="object" class="CCSchedule" column="schedule_id"/>
		</properties>
		<references>
			<reference class="CCMenuCategory" fkey="menu"/>
		</references>
	</class>
	<class name="CCMenuCategory" abstract="sql" table="webmenus_menu_category" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="hidden" type="boolean" column="hidden"/>
			<property name="cat_index" type="int" column="cat_index"/>
			<property name="menu" type="object" class="CCMenu" column="menu_id"/>
		</properties>
		<references>
			<reference class="CCMenuItem" fkey="menucategory"/>
		</references>
	</class>
	<class name="CCItemSize" abstract="sql" table="webmenus_menu_item_size" security="role">
		<properties>
			<!--property name="id" type="text" column="id" readonly="true"/-->
			<property name="size_desc" type="text" column="size_desc"/>
			<property name="price" type="real" column="price"/>
		</properties>
	</class>
	<class name="CCMenuItem" abstract="sql" table="webmenus_menu_item" security="role">
		<baseclass name="CCItemSize"/>
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="role" type="text" column="role" readonly="true"/>
			<property name="name" type="text" column="name"/>
			<property name="description" type="text" column="description"/>
			<property name="hidden" type="boolean" column="hidden"/>
			<property name="image" type="text" column="image"/>
			<property name="item_index" type="int" column="item_index"/>
			<property name="menucategory" type="object" class="CCMenuCategory" column="menu_cat_id"/>
		</properties>
		<references>
			<reference class="CCMenuItemSize" fkey="menuitem"/>
			<reference class="CCMenuItemOption" fkey="menuitem"/>
		</references>
	</class>
	<class name="CCMenuItemSize" abstract="sql" table="webmenus_menu_item_size" security="role">
		<baseclass name="CCItemSize"/>
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<!--property name="menuitem" type="object" class="CCMenuItem" column="menuitem_id"/-->
			<property name="size_index" type="int" column="size_index"/>
			<property name="menuitem" type="text" column="menuitem_id"/>
		</properties>
	</class>
	<class name="CCMenuItemOption" abstract="sql" table="webmenus_menu_item_option" security="role">
		<properties>
			<!--property name="id" type="text" column="id" readonly="true"/-->
			<property name="name" type="text" column="name"/>
			<!-- Type: 	SELECT (check boxes)
						SELECT-ONE (radio buttons)
						TEXT (text area)
			-->
			<property name="price" type="real" column="price"/>
			<property name="type" type="text" column="type"/>
			<property name="data" type="text" column="data"/>
			<property name="option_index" type="int" column="option_index"/>
			<property name="menuitem" type="object" class="CCMenuItem" column="menuitem_id"/>
		</properties>
	</class>
	<class name="CCMenuOrder" abstract="sql" table="webmenus_menu_order" security="role">
		<properties>
			<property name="id" type="text" column="id" readonly="true"/>
			<property name="role" type="text" column="role" readonly="true"/>
			<property name="order_time" type="datetime" column="order_time"/>
			<property name="email" type="text" column="email"/>
			<property name="subtotal" type="real" column="subtotal"/>
			<property name="tax_rate" type="real" column="tax_rate"/>
			<property name="tax" type="real" column="tax"/>
			<property name="total" type="real" column="total"/>
			<property name="delivery" type="boolean" column="delivery"/>
			<property name="delivery_info" type="text" column="delivery_info"/>
			<property name="fulfilled" type="boolean" column="fulfilled"/>
			<property name="notification_status" type="int" column="notification_status"/>
			<property name="location" type="object" class="CELocation" column="location_id"/>
		</properties>
		<references>
			<reference class="CCMenuOrderItem" fkey="menuorder"/>
		</references>
	</class>
	<!--class name="CCMenuOrderAddress" abstract="sql" table="webmenus_menu_order_addr" security="role">
		<properties>
			<property name="address" type="text" column="address" required="true"/>
			<property name="city" type="text" column="city" required="true"/>
			<property name="state" type="text" column="state" required="true"/>
			<property name="zip" type="text" column="zip" required="true"><![CDATA[
				^(\d{5}-\d{4})|(\d{5})$
			]]></property>
			<property name="contactnum" type="text" column="contactnum"><![CDATA[
				^(1\s*[-\/\.]?)?(\((\d{3})\)|(\d{3}))\s*[-\/\.]?\s*(\d{3})\s*[-\/\.]?\s*(\d{4})\s*(([xX]|[eE][xX][tT])\.?\s*(\d+))*$
			]]></property>
		</properties>
	</class-->
	<class name="CCMenuOrderItem" abstract="sql" table="webmenus_menu_order_item" security="role">
		<properties>
			<!--property name="id" type="text" column="id" readonly="true"/-->
			<property name="name" type="text" column="name"/>
			<property name="description" type="text" column="description"/>
			<property name="options" type="text" column="options"/>
			<property name="size" type="text" column="size_desc"/>
			<property name="price" type="real" column="price"/>
			<property name="quantity" type="int" column="quantity"/>
			<property name="menuorder" type="object" class="CCMenuOrder" column="menuorder_id"/>
		</properties>
	</class>
	
</taxonomy>
